# å¼€å‘è§„èŒƒä¸è§„åˆ™

## ğŸ”´ æ ¸å¿ƒè§„åˆ™ï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆï¼‰

### 1. æ—¶é—´å¤„ç†è§„åˆ™ âš ï¸ å¼ºåˆ¶è¦æ±‚

**æ‰€æœ‰æ¶‰åŠå½“å‰æ—¶é—´ã€å®æ—¶æ—¶é—´çš„åœºæ™¯å¿…é¡»è°ƒç”¨ç³»ç»Ÿæ—¶é—´APIï¼Œç¦æ­¢ä½¿ç”¨ç¡¬ç¼–ç æ—¶é—´ã€‚**

#### è§„åˆ™è¯´æ˜
- âœ… **å¿…é¡»ä½¿ç”¨**: `datetime.now()` è·å–ç³»ç»Ÿå½“å‰æ—¶é—´
- âŒ **ç¦æ­¢ä½¿ç”¨**: ç¡¬ç¼–ç çš„æ—¶é—´å­—ç¬¦ä¸²ã€å›ºå®šæ—¶é—´æˆ³
- âœ… **å…è®¸ä½¿ç”¨**: å›ºå®šçš„å†å²æ—¥æœŸï¼ˆå¦‚"2025å¹´10æœˆ5æ—¥"è¿™æ ·çš„å…·ä½“å†å²æ—¶é—´ï¼‰

#### æ­£ç¡®ç¤ºä¾‹

```python
from datetime import datetime, timedelta

# âœ… è·å–å½“å‰æ—¶é—´
current_time = datetime.now()

# âœ… è·å–å½“å‰æ—¶é—´æˆ³
timestamp = datetime.now().timestamp()

# âœ… æ ¼å¼åŒ–å½“å‰æ—¶é—´
formatted_time = datetime.now().strftime('%Y-%m-%d %H:%M:%S')

# âœ… åˆ¤æ–­æ˜¯å¦åœ¨é™é»˜æ—¶æ®µ
def is_quiet_hours():
    now = datetime.now()  # å¿…é¡»è°ƒç”¨ç³»ç»Ÿæ—¶é—´
    hour = now.hour
    return 0 <= hour < 6

# âœ… è®¡ç®—ä¸‹æ¬¡æ£€æŸ¥æ—¶é—´
def schedule_next_check(interval):
    next_time = datetime.now() + timedelta(seconds=interval)
    return next_time

# âœ… è®°å½•æ—¥å¿—æ—¶é—´
log_time = datetime.now().strftime('%Y-%m-%d %H:%M:%S')

# âœ… æ–‡ä»¶å‘½åæ—¶é—´æˆ³
filename = f"data_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json"
```

#### é”™è¯¯ç¤ºä¾‹

```python
# âŒ é”™è¯¯ï¼šç¡¬ç¼–ç æ—¶é—´
current_time = "2025-01-01 12:00:00"

# âŒ é”™è¯¯ï¼šä½¿ç”¨å›ºå®šæ—¶é—´æˆ³
timestamp = 1704067200

# âŒ é”™è¯¯ï¼šåœ¨ä»£ç ä¸­å†™æ­»æ—¶é—´
if hour == 12:  # åº”è¯¥ä»ç³»ç»Ÿæ—¶é—´è·å–

# âŒ é”™è¯¯ï¼šä½¿ç”¨å›ºå®šçš„æ—¶é—´å¯¹è±¡
fixed_time = datetime(2025, 1, 1, 12, 0, 0)  # é™¤éæ˜¯å†å²æ—¥æœŸ
```

#### é€‚ç”¨åœºæ™¯

| åœºæ™¯ | å¿…é¡»ä½¿ç”¨ç³»ç»Ÿæ—¶é—´ | ç¤ºä¾‹ |
|------|----------------|------|
| æ—¥å¿—æ—¶é—´æˆ³ | âœ… æ˜¯ | `datetime.now()` |
| ä¿¡æ¯æŠ“å–æ—¶é—´ | âœ… æ˜¯ | `datetime.now()` |
| é™é»˜æ—¶æ®µåˆ¤æ–­ | âœ… æ˜¯ | `datetime.now().hour` |
| å®šæ—¶ä»»åŠ¡è°ƒåº¦ | âœ… æ˜¯ | `datetime.now() + timedelta(...)` |
| æ•°æ®è®°å½•æ—¶é—´ | âœ… æ˜¯ | `datetime.now()` |
| æ–‡ä»¶å‘½åæ—¶é—´æˆ³ | âœ… æ˜¯ | `datetime.now().strftime(...)` |
| å†å²æ—¥æœŸè®°å½• | âŒ å¦ | å¯ä»¥ä½¿ç”¨å›ºå®šæ—¥æœŸ |

#### æ—¶é—´å¤„ç†å·¥å…·å‡½æ•°

å»ºè®®åœ¨é¡¹ç›®ä¸­åˆ›å»ºç»Ÿä¸€çš„æ—¶é—´å¤„ç†å·¥å…·å‡½æ•°ï¼š

```python
from datetime import datetime, timedelta
from typing import Optional

class TimeUtils:
    """æ—¶é—´å¤„ç†å·¥å…·ç±»"""
    
    @staticmethod
    def get_current_time() -> datetime:
        """è·å–å½“å‰ç³»ç»Ÿæ—¶é—´"""
        return datetime.now()
    
    @staticmethod
    def get_current_timestamp() -> float:
        """è·å–å½“å‰æ—¶é—´æˆ³"""
        return datetime.now().timestamp()
    
    @staticmethod
    def format_time(dt: Optional[datetime] = None, fmt: str = '%Y-%m-%d %H:%M:%S') -> str:
        """æ ¼å¼åŒ–æ—¶é—´"""
        if dt is None:
            dt = datetime.now()  # é»˜è®¤ä½¿ç”¨å½“å‰æ—¶é—´
        return dt.strftime(fmt)
    
    @staticmethod
    def is_quiet_hours(current_time: Optional[datetime] = None) -> bool:
        """åˆ¤æ–­æ˜¯å¦åœ¨é™é»˜æ—¶æ®µï¼ˆ0:00-6:00ï¼‰"""
        if current_time is None:
            current_time = datetime.now()  # å¿…é¡»è°ƒç”¨ç³»ç»Ÿæ—¶é—´
        hour = current_time.hour
        return 0 <= hour < 6
    
    @staticmethod
    def schedule_next_check(interval: int, current_time: Optional[datetime] = None) -> datetime:
        """è®¡ç®—ä¸‹æ¬¡æ£€æŸ¥æ—¶é—´ï¼ˆé¿å¼€é™é»˜æ—¶æ®µï¼‰"""
        if current_time is None:
            current_time = datetime.now()  # å¿…é¡»è°ƒç”¨ç³»ç»Ÿæ—¶é—´
        
        next_check = current_time + timedelta(seconds=interval)
        
        # å¦‚æœè½åœ¨é™é»˜æ—¶æ®µï¼Œå»¶ååˆ°é™é»˜æ—¶æ®µç»“æŸ
        if TimeUtils.is_quiet_hours(next_check):
            next_check = next_check.replace(hour=6, minute=0, second=0)
        
        return next_check
```

### 2. JSONæ ¼å¼è§„åˆ™

- **ä¸¥æ ¼éµå¾ªå¹³å°JSONæ ¼å¼è¦æ±‚**
- æ‰€æœ‰æ¶ˆæ¯å¿…é¡»ç¬¦åˆå¹³å°è§„èŒƒ
- æ¶ˆæ¯æ ¼å¼éªŒè¯å¿…é¡»é€šè¿‡
- ç¦æ­¢éšæ„ä¿®æ”¹JSONç»“æ„

### 3. ç»„é˜Ÿè§„åˆ™

- **ç¬¬1ä¸ªå’Œç¬¬3ä¸ªè¿æ¥**çš„AIè‡ªåŠ¨ä¸ºä¸€é˜Ÿ
- **ç¬¬2ä¸ªå’Œç¬¬4ä¸ªè¿æ¥**çš„AIè‡ªåŠ¨ä¸ºä¸€é˜Ÿ
- å¿…é¡»æ­£ç¡®è¯†åˆ«é˜Ÿå‹å¹¶é…åˆ
- ç»„é˜Ÿå…³ç³»åœ¨è¿æ¥æ—¶ç¡®å®šï¼Œä¸å¯æ›´æ”¹

### 4. å“åº”æ—¶é—´è§„åˆ™

- å†³ç­–å“åº”æ—¶é—´å»ºè®® < 1ç§’
- é¿å…è¶…æ—¶å¯¼è‡´åˆ¤è´Ÿ
- ä¼˜åŒ–ç®—æ³•ç¡®ä¿åŠæ—¶å“åº”

### 5. ä¿¡æ¯ç›‘æ§è§„åˆ™

- æ£€æŸ¥é—´éš” â‰¥ 6å°æ—¶
- æ¯æ—¥ 0:00-6:00 ä¸ºé™é»˜æ—¶æ®µï¼Œä¸è¿›è¡Œæ£€æŸ¥
- éµå®ˆç½‘ç«™ä½¿ç”¨æ¡æ¬¾ï¼Œä¸é€ æˆæœåŠ¡å™¨å‹åŠ›
- ä½¿ç”¨ç³»ç»Ÿæ—¶é—´åˆ¤æ–­é™é»˜æ—¶æ®µ

## ğŸ“ ä»£ç è§„èŒƒ

### Pythonä»£ç è§„èŒƒ

- éµå¾ª PEP 8 Pythonä»£ç è§„èŒƒ
- ä½¿ç”¨ç±»å‹æç¤ºï¼ˆType Hintsï¼‰
- ç¼–å†™æ¸…æ™°çš„æ³¨é‡Šå’Œæ–‡æ¡£å­—ç¬¦ä¸²
- å‡½æ•°å’Œç±»è¦æœ‰æ¸…æ™°çš„å‘½å

### æ–‡æ¡£è§„èŒƒ

- **æ–‡æ¡£å°½é‡ç®€æ´**ï¼šé¿å…ä¸€æ¬¡æ€§ç”Ÿæˆè¿‡é•¿æ–‡æ¡£å¯¼è‡´è¶…æ—¶
- **å…ˆåˆ—æçº²å†å¡«å……**ï¼šå…ˆåˆ›å»ºæ–‡æ¡£æ¡†æ¶å’Œæçº²å¹¶ä¿å­˜ï¼Œå†é€æ­¥å¡«å……å†…å®¹
- **å®šæœŸä¿å­˜**ï¼šæ¯3åˆ†é’Ÿä¿å­˜ä¸€æ¬¡ï¼Œé¿å…é•¿æ—¶é—´ç¼–è¾‘å¯¼è‡´å†…å®¹ä¸¢å¤±
- **éµå®ˆæ—¶é—´è§„èŒƒ**ï¼šæ–‡æ¡£ä¸­çš„æ—¶é—´ä¿¡æ¯åº”ä½¿ç”¨ç³»ç»Ÿæ—¶é—´APIï¼Œç¦æ­¢ç¡¬ç¼–ç æ—¶é—´

### æ—¶é—´å¤„ç†è§„èŒƒ

#### å¿…é¡»ä½¿ç”¨ç³»ç»Ÿæ—¶é—´API

```python
# âœ… æ­£ç¡®
from datetime import datetime
current_time = datetime.now()

# âŒ é”™è¯¯
current_time = "2025-01-01 12:00:00"
```

#### æ—¶é—´å¤„ç†å·¥å…·å‡½æ•°

å»ºè®®ä½¿ç”¨ç»Ÿä¸€çš„æ—¶é—´å¤„ç†å·¥å…·å‡½æ•°ï¼Œé¿å…åœ¨ä»£ç ä¸­ç›´æ¥è°ƒç”¨ `datetime.now()`ï¼Œä¾¿äºæµ‹è¯•å’Œç»´æŠ¤ã€‚

### é”™è¯¯å¤„ç†è§„èŒƒ

- æ‰€æœ‰å¯èƒ½å¤±è´¥çš„æ“ä½œéƒ½è¦æœ‰å¼‚å¸¸å¤„ç†
- è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- æä¾›æœ‰æ„ä¹‰çš„é”™è¯¯ä¿¡æ¯

### æ—¥å¿—è§„èŒƒ

- ä½¿ç”¨ç»Ÿä¸€çš„æ—¥å¿—æ ¼å¼
- æ—¥å¿—æ—¶é—´æˆ³å¿…é¡»ä½¿ç”¨ç³»ç»Ÿæ—¶é—´
- åŒºåˆ†ä¸åŒçº§åˆ«çš„æ—¥å¿—ï¼ˆDEBUG/INFO/WARNING/ERRORï¼‰

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### å•å…ƒæµ‹è¯•

- æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½è¦æœ‰å•å…ƒæµ‹è¯•
- æµ‹è¯•æ—¶é—´ç›¸å…³åŠŸèƒ½æ—¶ï¼Œå¯ä»¥ä½¿ç”¨mockæ—¶é—´
- ç¡®ä¿æµ‹è¯•çš„å¯é‡å¤æ€§

### æ—¶é—´æµ‹è¯•ç¤ºä¾‹

```python
from unittest.mock import patch
from datetime import datetime

def test_is_quiet_hours():
    """æµ‹è¯•é™é»˜æ—¶æ®µåˆ¤æ–­"""
    # æµ‹è¯•å‡Œæ™¨3ç‚¹ï¼ˆåœ¨é™é»˜æ—¶æ®µï¼‰
    with patch('datetime.datetime') as mock_datetime:
        mock_datetime.now.return_value = datetime(2025, 1, 1, 3, 0, 0)
        assert is_quiet_hours() == True
    
    # æµ‹è¯•ä¸Šåˆ10ç‚¹ï¼ˆä¸åœ¨é™é»˜æ—¶æ®µï¼‰
    with patch('datetime.datetime') as mock_datetime:
        mock_datetime.now.return_value = datetime(2025, 1, 1, 10, 0, 0)
        assert is_quiet_hours() == False
```

## âš ï¸ å¸¸è§é”™è¯¯

### æ—¶é—´å¤„ç†é”™è¯¯

1. **ç¡¬ç¼–ç æ—¶é—´**
   ```python
   # âŒ é”™è¯¯
   if datetime.now().hour == 12:
       do_something()
   ```

2. **ä½¿ç”¨å›ºå®šæ—¶é—´æˆ³**
   ```python
   # âŒ é”™è¯¯
   timestamp = 1704067200
   ```

3. **å¿˜è®°è°ƒç”¨ç³»ç»Ÿæ—¶é—´**
   ```python
   # âŒ é”™è¯¯
   def get_time():
       return "2025-01-01 12:00:00"  # åº”è¯¥è¿”å›datetime.now()
   ```

## âœ… æ£€æŸ¥æ¸…å•

å¼€å‘æ—¶è¯·ç¡®ä¿ï¼š
- [ ] æ‰€æœ‰æ—¶é—´ç›¸å…³ä»£ç éƒ½ä½¿ç”¨ `datetime.now()`
- [ ] æ²¡æœ‰ç¡¬ç¼–ç çš„æ—¶é—´å­—ç¬¦ä¸²
- [ ] æ²¡æœ‰ä½¿ç”¨å›ºå®šçš„æ—¶é—´æˆ³
- [ ] æ—¶é—´å¤„ç†å‡½æ•°éƒ½æœ‰é€‚å½“çš„æµ‹è¯•
- [ ] æ—¥å¿—æ—¶é—´æˆ³ä½¿ç”¨ç³»ç»Ÿæ—¶é—´
- [ ] å®šæ—¶ä»»åŠ¡åŸºäºç³»ç»Ÿæ—¶é—´è®¡ç®—

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [README.md](../README.md) - é¡¹ç›®ä¸»æ–‡æ¡£ï¼ˆåŒ…å«æ—¶é—´å¤„ç†è§„åˆ™ï¼‰
- [æ¶æ„æ–¹æ¡ˆ](æ¼è›‹AIå®¢æˆ·ç«¯æ¶æ„æ–¹æ¡ˆ.md) - è¯¦ç»†æŠ€æœ¯æ–‡æ¡£

---

**é‡è¦æé†’**: æ—¶é—´å¤„ç†è§„åˆ™æ˜¯é¡¹ç›®çš„æ ¸å¿ƒè§„åˆ™ä¹‹ä¸€ï¼Œæ‰€æœ‰å¼€å‘è€…å¿…é¡»ä¸¥æ ¼éµå®ˆï¼

