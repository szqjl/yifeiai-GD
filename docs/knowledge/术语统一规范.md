# 掼蛋AI知识库术语统一规范

## 📋 规范概述

本文档定义掼蛋AI知识库中玩家关系术语的统一标准，确保所有文档使用一致的表述。

## 🎯 术语定义

### 1. 队友相关术语

**统一术语**：**对家**

**说明**：
- "对家"是掼蛋游戏中的标准术语，指与当前玩家一队的队友
- 根据平台规则：座位号0和2为一队，1和3为一队
- 队友识别公式：`teammate_pos = (myPos + 2) % 4`

**替代术语**（需统一替换）：
- ❌ "搭档" → ✅ "对家"
- ❌ "同伴" → ✅ "对家"
- ❌ "队友" → ✅ "对家"（在掼蛋语境中，"对家"更准确）

**使用示例**：
- ✅ 正确：对家剩5张，明显是三带二 (`ThreeWithTwo`)
- ✅ 正确：配合对家，传对子 (`Pair`)
- ❌ 错误：搭档剩5张，明显是三带二
- ❌ 错误：配合队友，传对子

### 2. 对手相关术语

**统一术语**：**对手**

**说明**：
- "对手"是标准术语，指与当前玩家不同队的玩家
- 根据平台规则：如果当前玩家是0或2，则对手是1和3；如果当前玩家是1或3，则对手是0和2

**替代术语**（需统一替换）：
- ❌ "敌" → ✅ "对手"
- ❌ "敌方" → ✅ "对手" 或 "对手方"
- ❌ "对方" → ✅ "对手" 或 "对手方"（根据语境选择）

**使用示例**：
- ✅ 正确：对手剩5张，判断是三带二 (`ThreeWithTwo`)
- ✅ 正确：对手方有两名玩家
- ❌ 错误：敌方剩5张，判断是三带二
- ❌ 错误：对方剩5张，判断是三带二（在明确指对手时）

### 3. 位置相关术语

**统一术语**：**上家**、**下家**

**说明**：
- "上家"和"下家"是位置概念，相对于当前玩家
- **上家**：当前玩家之前的玩家（按出牌顺序）
- **下家**：当前玩家之后的玩家（按出牌顺序）
- 这些术语在描述位置关系时是必要的，应保留
- 根据平台规则：上家和下家为对方（对手）

**座位关系示例**（按出牌顺序，**顺时针**）：
- 根据平台使用说明：`order` 字段表示完牌次序（如 `[0, 1, 2, 3]`），代表出牌顺序
- 根据一等奖代码实现：`numofnext = (myPos+1)%4`（下家），`numofpre = (myPos-1)%4`（上家）
- **平台实际出牌顺序**：**0 → 1 → 2 → 3 → 0...**（顺时针）
- **0号位**：
  - 上家：**3号位**（在0之前出牌，顺时针方向：3 → 0，`(0-1)%4=3`）
  - 下家：**1号位**（在0之后出牌，顺时针方向：0 → 1，`(0+1)%4=1`）
  - 对家：**2号位**（队友，`(0+2)%4=2`）
- **1号位**：
  - 上家：**0号位**（在1之前出牌，顺时针方向：0 → 1，`(1-1)%4=0`）
  - 下家：**2号位**（在1之后出牌，顺时针方向：1 → 2，`(1+1)%4=2`）
  - 对家：**3号位**（队友，`(1+2)%4=3`）
- **2号位**：
  - 上家：**1号位**（在2之前出牌，顺时针方向：1 → 2，`(2-1)%4=1`）
  - 下家：**3号位**（在2之后出牌，顺时针方向：2 → 3，`(2+1)%4=3`）
  - 对家：**0号位**（队友，`(2+2)%4=0`）
- **3号位**：
  - 上家：**2号位**（在3之前出牌，顺时针方向：2 → 3，`(3-1)%4=2`）
  - 下家：**0号位**（在3之后出牌，顺时针方向：3 → 0，`(3+1)%4=0`）
  - 对家：**1号位**（队友，`(3+2)%4=1`）

**计算公式**：
- 下家位置：`(myPos + 1) % 4`
- 上家位置：`(myPos - 1) % 4`
- 对家位置：`(myPos + 2) % 4`

**注意**：虽然江苏掼蛋规则第240条说"出牌以逆时针为序"，但平台实际实现为顺时针顺序。应以平台实现为准。

**替代术语**（需统一替换）：
- ❌ "上对方" → ✅ "上家"
- ❌ "下对方" → ✅ "下家"

**使用示例**：
- ✅ 正确：上家出对子 (`Pair`)，下家不要
- ✅ 正确：下家剩5张，判断是三带二 (`ThreeWithTwo`)
- ✅ 正确：上家剩大王 (`R`)，对家有大炸 (`Bomb`)
- ✅ 正确：如果我是0号位，上家是3号位，下家是1号位（顺时针顺序，`(0-1)%4=3`，`(0+1)%4=1`）
- ❌ 错误：上对方出对子，下对方不要

### 4. 己方/对方相关术语

**统一术语**：
- **我方**：指当前玩家所在的一方（包括对家）- 平台使用说明标准术语
- **对方**：指对手所在的一方（包括两名对手）- 平台使用说明标准术语

**说明**：
- 根据平台使用说明："我方等级"、"对方等级"等表述
- 江苏掼蛋规则中："本家和对家为己方，上家和下家为对方"
- 为与平台使用说明保持一致，统一使用"我方"和"对方"

**替代术语**（需统一替换）：
- ❌ "己方" → ✅ "我方"（按平台使用说明统一）
- ✅ "我方"：已经是标准术语，保持不变
- ✅ "对方"：已经是标准术语，保持不变

**使用示例**：
- ✅ 正确：我方有两名玩家
- ✅ 正确：对方有两名玩家
- ✅ 正确：我方等级为K，对方等级为9
- ❌ 错误：己方有两名玩家（应统一为"我方"）

## 📝 替换规则

### 规则1：队友术语统一
- "搭档" → "对家"
- "同伴" → "对家"
- "队友" → "对家"（在掼蛋语境中）

### 规则2：对手术语统一（按平台使用说明）
- "敌" → "对方"
- "敌方" → "对方"
- "敌家" → "对方"
- "敌人" → "对方"
- "制敌" → "制对方"
- "封敌" → "封对方"
- "对方"：已经是标准术语，保持不变

### 规则3：己方术语统一（按平台使用说明）
- "己方" → "我方"（按平台使用说明统一）
- "我方"：已经是标准术语，保持不变

### 规则4：位置术语统一
- "上对方" → "上家"（位置术语）
- "下对方" → "下家"（位置术语）
- "上家"、"下家"：已经是标准术语，保持不变

## ⚠️ 注意事项

1. **语境判断**：
   - "对方"在某些语境中可能指"对手方"，需要根据上下文判断
   - 如果明确指对手，应替换为"对手"或"对手方"

2. **固定搭配**：
   - "对家"是掼蛋中的固定术语，不要改为"队友"
   - "上家"、"下家"是位置术语，必须保留

3. **代码变量**：
   - 代码中使用平台标准变量名：`teammate_pos`、`opponent_pos`等
   - 文档描述中使用中文术语：对家、对手

## 🔍 检查清单

在更新文档时，检查以下术语：
- [ ] "搭档" → "对家"
- [ ] "同伴" → "对家"
- [ ] "队友" → "对家"（掼蛋语境）
- [ ] "敌" → "对方"
- [ ] "敌方" → "对方"
- [ ] "敌家" → "对方"
- [ ] "敌人" → "对方"
- [ ] "制敌" → "制对方"
- [ ] "封敌" → "封对方"
- [ ] "己方" → "我方"（按平台使用说明统一）
- [ ] "上对方" → "上家"（位置术语）
- [ ] "下对方" → "下家"（位置术语）
- [ ] 保留"上家"、"下家"（位置术语，已经是标准术语）
- [ ] 保留"我方"、"对方"（平台使用说明标准术语）
- [ ] 保留"本家"（规则中的标准术语，指牌手本人）

## 📚 参考

- **平台规则**：座位号0和2为一队，1和3为一队
- **队友识别**：`teammate_pos = (myPos + 2) % 4`
- **掼蛋术语**：对家、上家、下家是标准术语
- **平台使用说明**：使用"我方"和"对方"作为标准术语
- **江苏掼蛋规则**：
  - "本家和对家为己方，上家和下家为对方"
  - "位于左方的对手为上家，位于右方的对手为下家"（第167条）
- **平台实现**（以平台为准）：
  - `order` 字段表示完牌次序，代表出牌顺序（如 `[0, 1, 2, 3]`）
  - 出牌顺序：**0 → 1 → 2 → 3 → 0...**（顺时针）
  - 代码实现：`numofnext = (myPos+1)%4`（下家），`numofpre = (myPos-1)%4`（上家）
  - 一等奖代码符合平台规则

---

**创建时间**：2025-01-27  
**版本**：v1.0  
**适用范围**：`docs/knowledge/` 目录下所有文档

